---
layout: post
title:  "FPGA开发板资料"
date:   2020-11-18 09:26:51 +0800
categories: other
---

# 燕山大学电子与通信工程系 专业综合课程设计A IV(二级项目)
# Cyclone FPGA 开发板
## 第一章	课程设计基本情况介绍

课程设计是学生理论联系实际的重要实验教学环节，是对学生进行的一次综合性专业设计训练。本次课程设计以Altera公司的Cyclone系列EP1C3T144C8为核心的开发板为基础，结合外围硬件电路，采用VHDL语言实现简单的数字逻辑电路。其目的是巩固所学知识，提高实验动手能力，加强综合应用能力，启发创新思维。其任务掌握小型数字电路系统的设计方法和调试、检测技术；初步掌握应用FPGA和Quartus II开发工具设计小型数字电路系统的设计流程、仿真、检测技术直至下载到实际物理器件进行实际物理测试的能力；提高设计能力和实验技能，为以后进行毕业设计、电子电路的综合设计、研制电子产品打下基础。

## 第二章	FPGA实验平台简介

### 2.1	FPGA简介

FPGA是field-programmable gate array的缩写。从本质上讲，FPGA是一种硬件电路，用户可以对其进行编程以执行一个或多个逻辑运算。进一步说，FPGA是集成电路或IC，它是芯片上电路集合，这就是为什么被称作阵列。这些电路或阵列是可编程逻辑门，存储器或其他元件的集合。

FPGA自诞生以来，经历了从配角到主角的过程，由于FPGA飞速的发展，凭借其灵活性高、开发周期短、并行计算效率高等优势，使其应用到越来越多的领域中，如通信、消费电子、工业控制以及嵌入式等领域。

### 2.2 芯片资源说明

课程设计所使用的实验平台是Altera Cyclone系列的FPGA芯片，芯片型号为EP1C3T144C8，其中EP1C表示芯片属于Cyclone系列；3表示设备类型，该设备类型逻辑单元数2910个，M4K RAM blocks（128×36bits）数量为13个，总共有59904比特RAM，含有1个PPL，并且最大用户I/O引脚数量104个；T表示封装类型为TQFP封装形式；144表示芯片封装引脚为144引脚；C表示工作温度为商用温度等级（0℃至85℃）；8表示速度等级。具体的命名规则如下：

## 第三章	硬件资源详解语言

### 3.1	系统总体介绍

课程设计开发板如上图所示，有丰富的板载资源。开发板板载资源可分为十六个功能模块：数码管显示电路、8x8点阵电路、AD电路、DA电路、实时时钟、1602/12864/TFT液晶显示电路、CH340串口电路、蜂鸣器电路、单键电路、矩阵键盘、直流/步进电机电路、LED显示电路、拨码开关电路、温度检测电路、I2C存储电路以及SPI存储电路。这几种功能模块单独使用或结合在一起使用可实现多种功能。部分功能因为引脚复用的问题，不能够同时实现，需要依据跳线帽进行功能选择，这一点需要大家注意。需要跳线帽选择的功能如下：矩阵键盘与步进电机；ADC与RTC。

### 3.2 硬件资源详解

#### 3.2.1	时钟输入

开发板一共提供了两个FPGA的晶振时钟电路，如下图所示：

[![rEwQJA.png](https://s3.ax1x.com/2020/12/11/rEwQJA.png)](https://imgchr.com/i/rEwQJA)

图 3 开发板时钟电路
 
其中OSC1时钟已焊接，晶振时钟频率为48MHz，OSC2时钟未焊接，保留给用户根据功能需要焊接（一般情况OSC1时钟已经足够使用，时钟频率即48MHz）。

#### 3.2.2	JTAG和AS接口

[![rEd28I.png](https://s3.ax1x.com/2020/12/11/rEd28I.png)](https://imgchr.com/i/rEd28I)
 
图 4 开发板JTAG下载

开发板带有两个下载接口，其中一个接口为标准的JTAG接口，使用TCK、TDO、TMS、TDI四个引脚进行下载测试，下载文件名后缀为pof文件。开发板还带有AS下载接口，下载文件名后缀为sof文件。

AS模式(active serial configuration mode):FPGA器件每次上电时，作为控制器从配置器件EPCS主动发出读取数据信号，从而把EPCS的数据读入FPGA中，实现对FPGA的编程。

JTAG模式是直接下载到FPGA里面的，由于是SRAM，断电后要重新下载；AS是下载到FPGA的配置芯片里保存的，断电后程序不会丢失。

#### 3.2.3	按键电路
开发板一共带有9个按键，包括一个电源开关按键、一个开发板重配置按键、一个复位按键、两个独立用户按键、四个按键组成的矩阵键盘。
 
[![rEwkxx.png](https://s3.ax1x.com/2020/12/11/rEwkxx.png)](https://imgchr.com/i/rEwkxx)

图 5 电源开关和复位按键


 
图 6 重配置按键

 
图 7 独立用户按键

<div align=center>[![rEwEM6.png](https://s3.ax1x.com/2020/12/11/rEwEM6.png)](https://imgchr.com/i/rEwEM6)
 
图 8 矩阵键盘

开关按键：按下按键时，开发板导通电源，需要注意的是，当按键松开时，开发板仍有可能通过下载接口供电。为了避免这种情况发生，在断电之前尽量先断开下载接口。

复位按键：为了方便程序运行，开发板独立出来复位按键。通常情况下，在程序下载之后，都需要按一下复位按键，程序才能够正常运行。
重配置按键：按下该按键后，可重新对FPGA进行编程。

独立用户按键：和复位按键的电路相同，按下时线路输出低电平，松开时为高电平。

矩阵键盘：矩阵键盘对应连接方式请参照下图矩阵键盘原理图，需要注意的是，在使用矩阵键盘时，请确保矩阵键盘右上方的四个跳线帽均连接下面两排排针。
 
图 9 矩阵键盘原理图

#### 3.2.4	拨码开关
 
图 10 拨码开关
 
图 11 拨码开关原理图

拨码开关及其原理图如上图所示，原理与按键电路相似，当某位拨码拨到ON时输出高电平，拨到另一边则输出低电平。
#### 3.2.5	6_LED
 
图 12 LED
 
图 13 LED原理图

开发板设置了6个独立的LED灯，其中，D1、D4为红色LED，D2、D5为黄色LED，D3、D6为绿色LED。可以用来模拟交通灯。

通过原理图可以看到，对应引脚输出高电平时LED被点亮，输出低电平时LED灯熄灭。

#### 3.2.6	4位数码管
 
图 14 数码管
 
图 15 数码管电路


#### 3.2.7	8×8_LED点阵
 
图 16 LED点阵
 
图 17 LED点阵原理图


#### 3.2.8	无源蜂鸣器
	

#### 3.2.9	LCD显示电路
	

#### 3.2.10	CH340串口电路
	

#### 3.2.11	直流/步进电机
	

#### 3.2.12	AD电路
 
图 18 AD原理图
#### 3.2.13	DA电路

3.2.14	实时时钟
 
图 19 实时时钟原理图
#### 3.2.15	温度检测电路
 
图 20 温度检测原理图
#### 3.2.16	I2C存储电路
 
图 21 I2C存储电路原理图
#### 3.2.17	SPI存储电路
 
图 22 SPI存储电路原理图
#### 3.2.18	电源接口
	

#### 3.2.19	测试点
 
图 23 测试点
当开发板工作不正常时，我们可以通过测试点进行排查问题。可以使用电表测量测试点电源是否正常。不过需要注意的是，5V0的测试点测量结果有些许偏差是正常现象，不影响开发板正常工作。
#### 3.2.20	扩展接口

## 开发环境搭建
### 1.安装 Quartus II 软件

点击安装"12.0_178_quartus_windows.exe" 文件完成安装，安装路径不能出现中文。

### 2.安装器件库

"12.0_178_devices_cyclone_max_legacy_windows.exe" ，安装路径需要和 Quartus II 软件安装路径相同。

### 3.软件破解

复制破解软件"Quartus_12.0_x64破解器.exe"，到"安装路径\quartus\bin64"路径下，使用管理员模式运行破解软件，点击应用，将生成的"license.dat"保存到该路径下。

打开该路径下"quartus.exe"软件，在左下方【Network Interface Card(NIC) ID】对应的栏中，复制逗号分隔的第一个ID号，用记事本打开"license.dat"文件，把"license.dat"里的两个XXXXXXXXXXXX用ID号替换，然后保存关闭"license.dat"。在【License file】栏中选中"license.dat"，Vendor下方出现破解信息，点击OK完成破解。

## 程序实例
## 资料获取
## 关于
